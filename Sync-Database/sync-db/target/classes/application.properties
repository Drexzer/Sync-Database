# ========================================
# DUAL DATABASE SYNC WITH FAILOVER CONFIG
# ========================================
spring.application.name=sync-db
server.port=8082

# ========================================
# MYSQL PRIMARY DATABASE CONFIGURATION
# ========================================
spring.datasource.link.url=jdbc:mysql://localhost:3306/link_db?createDatabaseIfNotExist=true&useSSL=false&allowPublicKeyRetrieval=true
spring.datasource.link.username=root
spring.datasource.link.password=root
spring.datasource.link.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.link.jpa.hibernate.ddl-auto=update
spring.datasource.link.jpa.show-sql=false
spring.datasource.link.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect


# MySQL Connection Pool Optimization
spring.datasource.link.hikari.connection-timeout=5000
spring.datasource.link.hikari.validation-timeout=3000
spring.datasource.link.hikari.leak-detection-threshold=60000
spring.datasource.link.hikari.maximum-pool-size=10
spring.datasource.link.hikari.minimum-idle=2

# ========================================
# POSTGRESQL FAILOVER DATABASE CONFIGURATION
# ========================================
spring.datasource.dlink.url=jdbc:postgresql://localhost:5432/postgres
spring.datasource.dlink.username=postgres
spring.datasource.dlink.password=root
spring.datasource.dlink.driver-class-name=org.postgresql.Driver
spring.datasource.dlink.jpa.hibernate.ddl-auto=update
spring.datasource.dlink.jpa.show-sql=false
spring.datasource.dlink.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# PostgreSQL Connection Pool Optimization
spring.datasource.dlink.hikari.connection-timeout=5000
spring.datasource.dlink.hikari.validation-timeout=3000
spring.datasource.dlink.hikari.leak-detection-threshold=60000
spring.datasource.dlink.hikari.maximum-pool-size=10
spring.datasource.dlink.hikari.minimum-idle=2

# ========================================
# LOGGING CONFIGURATION
# ========================================
logging.level.com.webkorps.sync_db=INFO
logging.level.org.springframework.jdbc=WARN
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# ========================================
# ASYNC & SCHEDULING CONFIGURATION
# ========================================
spring.task.execution.pool.core-size=4
spring.task.execution.pool.max-size=8
spring.task.execution.pool.queue-capacity=100
spring.task.execution.thread-name-prefix=SyncDB-
spring.task.scheduling.pool.size=2

# ========================================
# JPA & HIBERNATE OPTIMIZATION
# ========================================
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.jdbc.batch_size=25
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true
spring.jpa.properties.hibernate.generate_statistics=false
spring.jpa.properties.hibernate.cache.use_second_level_cache=false

# ========================================
# VALIDATION & ERROR HANDLING
# ========================================
spring.jpa.properties.hibernate.validator.apply_to_ddl=false
spring.jpa.properties.hibernate.validator.autoregister_listeners=false
server.error.include-message=always
server.error.include-binding-errors=always
server.error.include-stacktrace=never

# ========================================
# PERFORMANCE OPTIMIZATION
# ========================================
spring.jpa.properties.hibernate.connection.provider_disables_autocommit=false
spring.jpa.properties.hibernate.query.plan_cache_max_size=2048
spring.jpa.properties.hibernate.query.plan_parameter_metadata_max_size=128

# ========================================
# SPRING BOOT CONFIGURATION
# ========================================
spring.main.allow-bean-definition-overriding=true
spring.main.allow-circular-references=true
